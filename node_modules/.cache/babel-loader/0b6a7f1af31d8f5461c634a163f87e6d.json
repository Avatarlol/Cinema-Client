{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Desktop\\\\Web\\\\react\\\\Cinema-Client\\\\src\\\\components\\\\body\\\\admin\\\\forms\\\\eventform\\\\EventForm.js\";\nimport React, { useCallback, useState, useEffect, useRef } from \"react\";\n\nfunction EventForm() {\n  const [error, setError] = useState('');\n  const [theaters, setTheaters] = useState([]);\n  const [movies, setMovies] = useState([]);\n  const movieIdRef = useRef('');\n  const nameRef = useRef('');\n  const getTheaters = useCallback(async () => {\n    try {\n      const response = await fetch('getTheaters');\n\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n\n      const data = await response.json();\n      setTheaters(data);\n    } catch (error) {\n      setError(\"There's an issue with the server.\");\n    }\n  });\n  const loadMovies = useCallback(async () => {\n    try {\n      const requestOptions = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: ''\n        },\n        body: JSON.stringify({\n          \"name\": nameRef.current.value\n        })\n      };\n      const response = await fetch('movie/filter', requestOptions);\n\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n\n      const data = await response.json();\n      setMovies(data);\n    } catch (error) {\n      setError(\"There's an issue with the server.\");\n    }\n  });\n  useEffect(() => {\n    getTheaters();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    list: \"browsers\",\n    name: \"myBrowser\",\n    onBlur: loadMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"datalist\", {\n    id: \"browsers\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, movies.map(movie => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: movie.id,\n      value: movie.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 25\n      }\n    }, movie.name);\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, error), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }), \"Movie name\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onBlur: loadMovies,\n    ref: nameRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"select\", {\n    ref: movieIdRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 18\n    }\n  }), \"Starting time\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"datetime-local\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 18\n    }\n  }), \"Theater\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"select\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, theaters.map(theater => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: theater.id,\n      value: theater.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }\n    }, \"#\", theater.theaterNumber, \" (\", theater.seats, \" seats)\");\n  })));\n}\n\nexport default EventForm;","map":{"version":3,"sources":["C:/Users/user/OneDrive/Desktop/Web/react/Cinema-Client/src/components/body/admin/forms/eventform/EventForm.js"],"names":["React","useCallback","useState","useEffect","useRef","EventForm","error","setError","theaters","setTheaters","movies","setMovies","movieIdRef","nameRef","getTheaters","response","fetch","ok","Error","data","json","loadMovies","requestOptions","method","headers","token","body","JSON","stringify","current","value","map","movie","id","name","theater","theaterNumber","seats"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect, useRef } from \"react\";\r\n\r\nfunction EventForm() {\r\n\r\n    const [error, setError] = useState('')\r\n    const [theaters, setTheaters] = useState([])\r\n    const [movies, setMovies] = useState([])\r\n\r\n    const movieIdRef = useRef('')\r\n    const nameRef = useRef('')\r\n\r\n    const getTheaters = useCallback(async () => {\r\n        try {\r\n            const response = await fetch('getTheaters');\r\n            if (!response.ok) {\r\n              throw new Error('Something went wrong!');\r\n            }\r\n            const data = await response.json();\r\n            setTheaters(data);\r\n          } catch (error) {\r\n            setError(\"There's an issue with the server.\")\r\n          }\r\n      }); \r\n\r\n      const loadMovies = useCallback(async () => {\r\n        try {\r\n            const requestOptions = {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" , token: ''},\r\n                body: JSON.stringify(\r\n                {\r\n                  \"name\": nameRef.current.value\r\n                })\r\n              };\r\n            const response = await fetch('movie/filter', requestOptions);\r\n            if (!response.ok) {\r\n              throw new Error('Something went wrong!');\r\n            }\r\n            const data = await response.json();\r\n            setMovies(data);\r\n          } catch (error) {\r\n            setError(\"There's an issue with the server.\")\r\n          }\r\n      }); \r\n\r\n    useEffect(() => {\r\n        getTheaters();\r\n      }, [])\r\n\r\n    return ( \r\n        <form>\r\n            <input list=\"browsers\" name=\"myBrowser\" onBlur={loadMovies}/>\r\n            <datalist id=\"browsers\">\r\n                {movies.map(movie => {return(\r\n                        <option key={movie.id} value={movie.id}>{movie.name}</option>\r\n                    )})}\r\n            </datalist>\r\n            <div className=\"error\">{error}</div>\r\n            <br/>\r\n            Movie name\r\n            <br/>\r\n            <input type='text' onBlur={loadMovies} ref={nameRef}/>\r\n            <select ref={movieIdRef}>\r\n                \r\n            </select>\r\n            \r\n            <br/><br/>\r\n            Starting time\r\n            <br/>\r\n            <input type=\"datetime-local\" />\r\n            <br/><br/>\r\n            Theater\r\n            <br/>\r\n            <select>\r\n                {theaters.map(theater => {return(\r\n                    <option key={theater.id} value={theater.id}>#{theater.theaterNumber} ({theater.seats} seats)</option>\r\n                )})}\r\n            </select>\r\n\r\n        </form>\r\n     );\r\n}\r\n\r\nexport default EventForm;"]},"metadata":{},"sourceType":"module"}